---
layout:     post
title:      Diffdrr代码笔记
subtitle:   详解论文与代码对应关系
date:       2024-03-09
author:     CYXYZ
header-img: img/diff-pose.jpg
catalog: true
tags:
    - Diffdrr
    - 2D/3D
    - X射线成像

---


# DiffDrr notebook

## siddon算法的CT正投影计算

**Siddon 投影算法基于以下原理：**

- 射线穿过对象时，其强度会随着对象内部的衰减而减弱。
- 衰减量与射线路径上的对象密度成正比。
- Siddon 投影算法基于以下原理：
  - 射线穿过对象时，其强度会随着对象内部的衰减而减弱。
  - 衰减量与射线路径上的对象密度成正比。

算法通过将对象离散化为体素网格来工作。对于每个体素，算法计算射线穿过体素的路径长度。然后，它根据路径长度和体素密度计算射线的衰减。最后，算法将所有射线的衰减值累加起来，得到投影图像。

**基于 Siddon 投影的图像重建涉及以下步骤：**

1. **投影采集：**从不同角度采集对象的投影图像。
2. **反投影：**将每个投影图像反投影到图像空间中。
3. **滤波回投影：**对反投影图像进行滤波，以去除噪声和伪影。
4. **重建：**将滤波后的反投影图像相加，得到最终的重建图像。

*siddon方法的论文暂时还没看，之后关注一下。*

## DRR类代码

感觉东西有点复杂，似乎这篇文章就是把原先的siddon方法转化为x,y,z多个维度同时求，然后让他在整个空间运行在pytorch上，最后变得可微分。直接看代码吧。

diffdrr文件夹下的drr.py文件

调用其中的DRR类

